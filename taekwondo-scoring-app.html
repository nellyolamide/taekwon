<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taekwondo Scoring App</title>
    <style>
        body {
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a2e;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%232c2c44' stroke-width='1'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3Cg fill='%23e0e0e0'%3E%3Ccircle cx='769' cy='229' r='5'/%3E%3Ccircle cx='539' cy='269' r='5'/%3E%3Ccircle cx='603' cy='493' r='5'/%3E%3Ccircle cx='731' cy='737' r='5'/%3E%3Ccircle cx='520' cy='660' r='5'/%3E%3Ccircle cx='309' cy='538' r='5'/%3E%3Ccircle cx='295' cy='764' r='5'/%3E%3Ccircle cx='40' cy='599' r='5'/%3E%3Ccircle cx='102' cy='382' r='5'/%3E%3Ccircle cx='127' cy='80' r='5'/%3E%3Ccircle cx='370' cy='105' r='5'/%3E%3Ccircle cx='578' cy='42' r='5'/%3E%3Ccircle cx='237' cy='261' r='5'/%3E%3Ccircle cx='390' cy='382' r='5'/%3E%3C/g%3E%3C/svg%3E");
            color: #f0f0f0;
        }
        .container {
            background-color: rgba(16, 16, 36, 0.85);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            border: 2px solid #3d3d5c;
            position: relative;
            overflow: hidden;
        }
        .container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500' width='500' height='500'%3E%3Cpath fill='%23ffffff' fill-opacity='0.03' d='M246.5,40c-20,17.5-40.7,34.5-40.1,53.1c0.6,18.6,22,38.8,35.1,58.9c13.2,20.1,18.2,40.1,13.8,58.9 c-4.4,18.8-18.3,36.4-32.6,54.8c-14.2,18.4-28.9,37.4-29.7,57.6c-0.9,20.2,12.2,41.6,32.2,59.1c20,17.5,46.8,31.1,67.1,31.1 c20.3,0,34-13.5,54-32.1c20-18.6,46.2-42.3,54.8-65.1c8.6-22.8-0.5-44.7-9.5-65.5c-9-20.8-17.8-40.6-12.7-56.8 c5.1-16.3,24.2-29,38.8-44.9c14.6-15.9,24.6-35,16.4-51.9c-8.2-16.9-34.8-31.7-54.9-41.8c-20.1-10.1-33.9-15.6-48.9-16.3 C316.1,38.7,300,34.7,280,37.8C260,40.9,238.1,49.2,223.5,60C208.9,70.8,201.4,84.3,210,91.7c8.6,7.4,33.3,8.7,58.1,10 c24.8,1.3,49.6,2.6,62.6,14c13,11.4,14.1,32.9,6.4,51.5c-7.7,18.6-24.4,34.3-42.9,36.7c-18.5,2.4-38.9-8.5-55.3-23.8 c-16.4-15.3-28.9-35-31.1-52.6c-2.2-17.6,5.9-33.1,17.2-42.8c11.3-9.7,25.9-13.6,35.8-7.4c9.9,6.2,15.1,22.5,7.9,30.3 c-7.2,7.8-26.9,7.1-40.1-3.1c-13.2-10.2-19.9-29.9-13.2-37.8c6.7-7.9,26.7-4.1,42,3.9c15.3,8,26,20.2,30,33.6 c4,13.4,1.4,28-4.9,39.7c-6.3,11.7-16.2,20.4-28.1,26.4c-11.9,6-25.8,9.4-39.2,7.1c-13.4-2.3-26.2-10.2-34.3-23.2 c-8.1-13-11.7-31.1-6.8-46.8c4.9-15.7,18.3-29.1,35-36.6c16.6-7.5,36.6-9.3,49.9-1.5c13.3,7.8,19.5,25.1,18.6,38.8 c-0.9,13.7-8.9,23.8-15.6,32.1c-6.7,8.3-12.4,14.7-22.1,19.4c-9.7,4.7-23.5,7.7-37.3,1.7c-13.8-6-27.6-20.9-34.9-36.5 c-7.3-15.6-8.1-31.9-1.5-44.8c6.6-12.9,20.7-22.3,36.4-26.4c15.7-4.1,33.1-2.9,45.6,4.5c12.5,7.4,20.1,21,24.1,35.5 c4,14.5,4.4,29.9-3.9,44.4c-8.3,14.5-25.3,28.1-40.7,30.8c-15.4,2.7-29.3-5.5-40.9-15.5c-11.6-10-20.9-21.8-22.7-35.5 c-1.8-13.7,3.8-29.3,15.7-39.4c11.9-10.1,30-14.7,45.3-9.4c15.3,5.3,27.8,20.5,33.5,36c5.7,15.5,4.5,31.1-6.5,44.4 c-11,13.3-31.9,24.3-49.2,26.6c-17.3,2.3-31.1-4.2-42.3-14.5c-11.2-10.3-19.8-24.4-18.6-37.1c1.2-12.7,12.2-24.1,24.2-30.7 c12-6.6,25.1-8.4,37.5-4.5c12.4,3.9,24.3,13.5,32.1,25.7c7.8,12.2,11.5,27,4.7,37.5c-6.8,10.5-24.2,16.7-37.8,16.7 c-13.6,0-23.4-6.2-31.1-14.5c-7.7-8.3-13.2-18.8-11.7-28.2c1.5-9.4,10-17.8,22.2-20.8c12.2-3,28-0.6,36.5,7.5 c8.5,8.1,9.7,21.9,5.8,32.1c-3.9,10.2-12.9,16.7-22.9,22.1c-10,5.4-20.9,9.7-30.5,6.6c-9.6-3.1-17.9-13.5-22.9-24.7 c-5-11.2-6.7-23.1-2.4-31.6c4.3-8.5,14.7-13.6,25.4-15.7c10.7-2.1,21.7-1.2,29.9,4.9c8.2,6.1,13.5,17.4,13.5,28 c0,10.6-5.3,20.5-10.6,28.6c-5.3,8.1-10.6,14.5-20.3,17.5c-9.7,3-23.8,2.6-33-3.3c-9.2-5.9-13.6-17.3-13.3-27.8 c0.3-10.5,5.3-20.1,10.5-24.9c5.2-4.8,10.6-4.6,18.5-2c7.9,2.6,18.4,8.6,24.4,19.6'/%3E%3C/svg%3E");
            background-size: 40%;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.1;
            z-index: 0;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        .header h1 {
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 2.2rem;
            margin: 0;
            padding: 15px 0;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(61,61,92,0.5) 20%, rgba(61,61,92,0.5) 80%, rgba(0,0,0,0) 100%);
            border-bottom: 2px solid #3d3d5c;
        }
        .timer-section {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: rgba(25, 25, 45, 0.7);
            border: 1px solid #3d3d5c;
            position: relative;
            z-index: 1;
        }
        .timer-display {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        .timer-controls button {
            margin: 0 5px;
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        .round-display {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            color: #fff;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }
        .scores-container {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        .player {
            flex: 1;
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin: 0 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .player::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200' width='200' height='200'%3E%3Cpath d='M65.5,31.5c-4.4,5.6-8.8,11.2-13,16.9c-4.2,5.7-8.3,11.5-10.7,17.5s-2.9,12.2-0.4,17.6c2.5,5.4,8.5,10.6,14.4,15c5.9,4.4,11.7,8,16.4,13.1c4.7,5.1,8.3,11.6,8.7,18.2c0.4,6.6-2.4,13.2-5.8,18.9c-3.4,5.7-7.4,10.5-8.3,16c-0.9,5.5,1.2,11.6,5.9,16.3c4.7,4.7,12,8,18.4,9.3c6.4,1.3,11.9,0.6,17.8-2.2c5.9-2.8,12.2-7.7,18.6-11.6c6.4-3.9,12.9-6.8,17.9-12.1s8.5-13,10.3-20.7c1.8-7.7,1.5-15.8-0.9-22.3c-2.4-6.5-6.9-11.5-10.7-16.6c-3.8-5.1-6.9-10.3-6.6-15.8c0.3-5.5,4-11.2,8.9-15.6c4.9-4.4,10.9-7.5,14.9-12.3c4-4.8,6-11.3,4.9-17.7c-1.1-6.4-5.3-12.6-9.5-16.1c-4.2-3.5-8.4-4.3-13.1-4.9c-4.7-0.6-9.9-1-15.5-0.4c-5.6,0.6-11.6,2.2-15.6,5.7c-4,3.5-6,8.9-9.4,13c-3.4,4.1-8.2,7-14.1,7.8c-5.9,0.8-12.9-0.5-17.6-4.5c-4.7-4-7.1-10.8-5.8-17c1.3-6.2,6.3-11.8,11.7-15.7c5.4-3.9,11.2-6.1,17.1-5.9c5.9,0.2,11.9,3,15.9,7.7c4,4.7,6,11.2,5.5,17c-0.5,5.8-3.6,10.9-7.2,15.6c-3.6,4.7-7.7,9.1-10.3,14.2c-2.6,5.1-3.7,11-1.5,16.2c2.2,5.2,7.7,9.8,12.9,13.1c5.2,3.3,10.1,5.3,15.4,5.3c5.3,0,11-2,15.5-5.5c4.5-3.5,7.8-8.5,9.6-13.3c1.8-4.8,2.1-9.4,0-14.1c-2.1-4.7-6.6-9.5-11.4-12.8c-4.8-3.3-9.9-5.1-14.7-6.5' fill='%23FFFFFF' fill-opacity='0.3'/%3E%3C/svg%3E");
            background-size: cover;
            background-position: center;
            opacity: 0.05;
            z-index: -1;
        }
        .red {
            background-color: rgba(128, 20, 20, 0.8);
            border: 2px solid #ff6666;
        }
        .blue {
            background-color: rgba(20, 20, 128, 0.8);
            border: 2px solid #6666ff;
        }
        .player-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .score-display {
            font-size: 64px;
            font-weight: bold;
            margin: 10px 0;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        .score-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        .score-buttons button {
            margin: 5px;
            padding: 10px;
            width: 80px;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            transition: all 0.3s ease;
        }
        .score-buttons button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        .penalties {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        .penalty-display {
            font-weight: bold;
            font-size: 24px;
            margin: 5px 0;
            color: #fff;
        }
        .controls {
            text-align: center;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        button {
            cursor: pointer;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
        }
        button.reset {
            background-color: #f44336;
        }
        button.reset:hover {
            background-color: #d32f2f;
        }
        .timer-controls button.start {
            background-color: #4CAF50;
        }
        .timer-controls button.pause {
            background-color: #FFC107;
            color: #333;
        }
        .timer-controls button.reset {
            background-color: #f44336;
        }
        
        /* TKD Badge for the header */
        .header:after {
            content: "";
            position: absolute;
            width: 60px;
            height: 60px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23d2d2d2' fill-opacity='0.2' stroke='%23ffffff' stroke-width='2'/%3E%3Cpath d='M33,30 L33,70 M66,30 L66,70 M35,50 L65,50 M40,35 C50,25 50,25 60,35 M40,65 C50,75 50,75 60,65' stroke='%23ffffff' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
            background-size: contain;
            background-repeat: no-repeat;
            top: 15px;
            right: 20px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Taekwondo Scoring App</h1>
        </div>

        <div class="timer-section">
            <div class="round-display">Round <span id="current-round">1</span>/3</div>
            <div class="timer-display" id="timer">2:00</div>
            <div class="timer-controls">
                <button id="start-timer" class="start">Start</button>
                <button id="pause-timer" class="pause">Pause</button>
                <button id="reset-timer" class="reset">Reset</button>
                <button id="next-round">Next Round</button>
            </div>
        </div>

        <div class="scores-container">
            <div class="player red">
            <div class="player-name">Red Player</div>
                <div class="round-wins">
                    Rounds Won: <span id="red-rounds">0</span>
                </div>
                <div class="score-display" id="red-score">0</div>
                <div class="score-buttons">
                    <button onclick="addScore('red', 1)">+1</button>
                    <button onclick="addScore('red', 2)">+2</button>
                    <button onclick="addScore('red', 3)">+3</button>
                </div>
                <div class="penalties">
                    <div>Penalties (Gam-jeom)</div>
                    <div class="penalty-display" id="red-penalties">0</div>
                    <button onclick="addPenalty('red')">+1</button>
                </div>
            </div>

            <div class="player blue">
            <div class="player-name">Blue Player</div>
                <div class="round-wins">
                    Rounds Won: <span id="blue-rounds">0</span>
                </div>
                <div class="score-display" id="blue-score">0</div>
                <div class="score-buttons">
                    <button onclick="addScore('blue', 1)">+1</button>
                    <button onclick="addScore('blue', 2)">+2</button>
                    <button onclick="addScore('blue', 3)">+3</button>
                </div>
                <div class="penalties">
                    <div>Penalties (Gam-jeom)</div>
                    <div class="penalty-display" id="blue-penalties">0</div>
                    <button onclick="addPenalty('blue')">+1</button>
                </div>
            </div>
        </div>

        <div class="controls">
            <button id="reset-match" class="reset">Reset Match</button>
        </div>
    </div>

    <script>
        // Timer variables
        let timerInterval;
        let timerSeconds = 120; // 2 minutes
        let isRunning = false;
        let currentRound = 1;
        
        // Score variables
        const scores = {
            red: 0,
            blue: 0
        };
        
        const penalties = {
            red: 0,
            blue: 0
        };
        
        // Round tracking
        const roundWins = {
            red: 0,
            blue: 0
        };
        
        // Timer functions
        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            document.getElementById('timer').textContent = 
                `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }
        
        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(() => {
                    if (timerSeconds > 0) {
                        timerSeconds--;
                        updateTimerDisplay();
                    } else {
                        clearInterval(timerInterval);
                        isRunning = false;
                        // Timer finished
                        alert("Round Complete!");
                        // Automatically determine round winner when time runs out
                        determineRoundWinner();
                        
                        // Check if match is over
                        if (roundWins.red >= 2) {
                            alert("Match over! Red player wins 2 rounds!");
                            displayMatchResults();
                        } else if (roundWins.blue >= 2) {
                            alert("Match over! Blue player wins 2 rounds!");
                            displayMatchResults();
                        } else if (currentRound === 3) {
                            // If this was the 3rd round and no one has 2 wins yet
                            displayMatchResults();
                        }
                        
                        updateRoundWinsDisplay();
                    }
                }, 1000);
                document.getElementById('start-timer').textContent = "Resume";
            }
        }
        
        function pauseTimer() {
            clearInterval(timerInterval);
            isRunning = false;
        }
        
        function resetTimer() {
            pauseTimer();
            timerSeconds = 120; // Reset to 2 minutes
            updateTimerDisplay();
            document.getElementById('start-timer').textContent = "Start";
        }
        
        function nextRound() {
            // Determine round winner and update roundWins
            determineRoundWinner();
            
            // Check if match is over after determining round winner
            if (roundWins.red >= 2) {
                alert("Match over! Red player wins 2 rounds!");
                displayMatchResults();
                return;
            } else if (roundWins.blue >= 2) {
                alert("Match over! Blue player wins 2 rounds!");
                displayMatchResults();
                return;
            }
            
            // If match isn't over, proceed to next round
            currentRound++;
            if (currentRound > 3) {
                alert("Match complete! All 3 rounds finished.");
                displayMatchResults();
                currentRound = 3; // Keep at max 3
            }
            
            document.getElementById('current-round').textContent = currentRound;
            
            // Reset scores for next round but keep round wins
            scores.red = 0;
            scores.blue = 0;
            penalties.red = 0;
            penalties.blue = 0;
            
            resetTimer();
            updateScoreDisplay();
            updateRoundWinsDisplay();
        }
        
        function determineRoundWinner() {
            if (scores.red > scores.blue) {
                roundWins.red++;
                alert("Round " + currentRound + " goes to Red player!");
            } else if (scores.blue > scores.red) {
                roundWins.blue++;
                alert("Round " + currentRound + " goes to Blue player!");
            } else {
                alert("Round " + currentRound + " is a tie!");
                // In case of a tie, no round win is awarded
            }
        }
        
        function displayMatchResults() {
            let resultMessage = "MATCH RESULT: ";
            if (roundWins.red > roundWins.blue) {
                resultMessage += "Red player wins the match " + roundWins.red + "-" + roundWins.blue;
            } else if (roundWins.blue > roundWins.red) {
                resultMessage += "Blue player wins the match " + roundWins.blue + "-" + roundWins.red;
            } else {
                resultMessage += "Match ended in a tie " + roundWins.red + "-" + roundWins.blue;
            }
            
            alert(resultMessage);
        }
        
        function updateRoundWinsDisplay() {
            document.getElementById('red-rounds').textContent = roundWins.red;
            document.getElementById('blue-rounds').textContent = roundWins.blue;
        }
        
        // Score functions
        function updateScoreDisplay() {
            document.getElementById('red-score').textContent = scores.red;
            document.getElementById('blue-score').textContent = scores.blue;
            document.getElementById('red-penalties').textContent = penalties.red;
            document.getElementById('blue-penalties').textContent = penalties.blue;
        }
        
        function addScore(player, points) {
            scores[player] += points;
            updateScoreDisplay();
        }
        
        function addPenalty(player) {
            penalties[player]++;
            // In Taekwondo, a penalty (Gam-jeom) gives one point to the opponent
            if (player === 'red') {
                scores.blue += 1;
                if (penalties.red >= 5) {
                    alert("Match over! Blue player wins by 5 Gam-jeom rule.");
                    pauseTimer();
                    // Award this round to blue
                    roundWins.blue++;
                    updateRoundWinsDisplay();
                    displayMatchResults();
                }
            } else {
                scores.red += 1;
                if (penalties.blue >= 5) {
                    alert("Match over! Red player wins by 5 Gam-jeom rule.");
                    pauseTimer();
                    // Award this round to red
                    roundWins.red++;
                    updateRoundWinsDisplay();
                    displayMatchResults();
                }
            }
            updateScoreDisplay();
        }
        
        function resetMatch() {
            scores.red = 0;
            scores.blue = 0;
            penalties.red = 0;
            penalties.blue = 0;
            roundWins.red = 0;
            roundWins.blue = 0;
            currentRound = 1;
            document.getElementById('current-round').textContent = currentRound;
            resetTimer();
            updateScoreDisplay();
            updateRoundWinsDisplay();
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Set up event listeners
            document.getElementById('start-timer').addEventListener('click', startTimer);
            document.getElementById('pause-timer').addEventListener('click', pauseTimer);
            document.getElementById('reset-timer').addEventListener('click', resetTimer);
            document.getElementById('next-round').addEventListener('click', nextRound);
            document.getElementById('reset-match').addEventListener('click', resetMatch);
            
            // Initialize displays
            updateTimerDisplay();
            updateScoreDisplay();
            updateRoundWinsDisplay();
        });
    </script>
</body>
</html>